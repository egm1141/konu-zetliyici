<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PageCraft</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{background:#111;color:#eee;font-family:'Outfit',sans-serif;height:100vh;display:flex;flex-direction:column;overflow:hidden;user-select:none;}

/* TOPBAR */
.topbar{height:50px;background:#1a1a22;border-bottom:1px solid #2a2a38;display:flex;align-items:center;padding:0 14px;gap:10px;flex-shrink:0;}
.logo{font-family:'Syne',sans-serif;font-size:18px;font-weight:800;color:#fff;}
.logo b{color:#6c63ff;}
.tbtn{padding:6px 12px;border-radius:7px;border:1px solid #2a2a38;background:#222;color:#ddd;font-size:12px;cursor:pointer;font-family:'Outfit',sans-serif;transition:all .15s;}
.tbtn:hover{border-color:#6c63ff;color:#6c63ff;}
.tbtn.pri{background:#6c63ff;border-color:#6c63ff;color:#fff;}
.tbtn.pri:hover{background:#5a52e0;}
.sep{width:1px;height:28px;background:#2a2a38;}
.sp{flex:1;}

/* LAYOUT */
.main{display:flex;flex:1;overflow:hidden;}

/* ICON RAIL */
.rail{width:58px;background:#1a1a22;border-right:1px solid #2a2a38;display:flex;flex-direction:column;align-items:center;padding:8px 0;gap:2px;flex-shrink:0;}
.rail-btn{width:46px;height:46px;border-radius:9px;border:1px solid transparent;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .15s;color:#666;font-size:17px;gap:1px;}
.rail-btn span{font-size:8px;color:#555;}
.rail-btn:hover{background:#222;color:#aaa;}
.rail-btn.on{background:#222;border-color:#6c63ff;color:#6c63ff;}
.rail-btn.on span{color:#6c63ff;}

/* SIDE PANEL */
.side{width:270px;background:#1a1a22;border-right:1px solid #2a2a38;overflow-y:auto;flex-shrink:0;}
.side::-webkit-scrollbar{width:4px;}
.side::-webkit-scrollbar-thumb{background:#2a2a38;border-radius:99px;}
.pblock{padding:14px;}
.plabel{font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:#555;font-weight:600;margin-bottom:10px;}

/* Template cards */
.tgrid{display:grid;grid-template-columns:1fr 1fr;gap:7px;}
.tcard{background:#222;border:1.5px solid #2a2a38;border-radius:9px;padding:10px 7px;cursor:pointer;text-align:center;transition:all .15s;}
.tcard:hover{border-color:#6c63ff;transform:translateY(-1px);background:#252535;}
.tcard-icon{font-size:20px;margin-bottom:4px;}
.tcard-name{font-size:10px;color:#888;line-height:1.3;}

/* Inputs */
.sinput{width:100%;background:#222;border:1px solid #2a2a38;border-radius:7px;padding:7px 10px;color:#eee;font-size:12px;font-family:'Outfit',sans-serif;outline:none;}
.sinput:focus{border-color:#6c63ff;}
.sselect{width:100%;background:#222;border:1px solid #2a2a38;border-radius:7px;padding:7px 8px;color:#eee;font-size:12px;font-family:'Outfit',sans-serif;outline:none;cursor:pointer;}
.sselect:focus{border-color:#6c63ff;}

/* Color row */
.crow{display:grid;grid-template-columns:repeat(6,1fr);gap:5px;margin-bottom:10px;}
.cdot{aspect-ratio:1;border-radius:5px;cursor:pointer;border:2px solid transparent;transition:all .15s;}
.cdot:hover{border-color:#fff;transform:scale(1.1);}
.cinput{display:flex;gap:7px;align-items:center;}
.cinput input[type=color]{width:34px;height:34px;border:none;border-radius:6px;cursor:pointer;padding:1px;background:#222;}
.cinput input[type=text]{flex:1;background:#222;border:1px solid #2a2a38;border-radius:7px;padding:6px 8px;color:#eee;font-size:11px;font-family:monospace;outline:none;}
.cinput input[type=text]:focus{border-color:#6c63ff;}

/* Style buttons */
.sbtns{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:8px;}
.sbtn{width:32px;height:32px;border-radius:6px;border:1px solid #2a2a38;background:#222;color:#eee;font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s;}
.sbtn:hover,.sbtn.on{background:#6c63ff;border-color:#6c63ff;color:#fff;}
.abtns{display:flex;gap:5px;margin-bottom:8px;}
.abtn{flex:1;height:30px;border-radius:6px;border:1px solid #2a2a38;background:#222;color:#888;font-size:12px;cursor:pointer;transition:all .15s;}
.abtn:hover,.abtn.on{background:#6c63ff;border-color:#6c63ff;color:#fff;}

/* Photo */
.drop-area{border:2px dashed #2a2a38;border-radius:9px;padding:22px 12px;text-align:center;cursor:pointer;transition:all .2s;background:#1e1e28;position:relative;margin-bottom:10px;}
.drop-area:hover,.drop-area.ov{border-color:#6c63ff;background:rgba(108,99,255,.06);}
.drop-area input{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;}
.pgrid{display:grid;grid-template-columns:1fr 1fr;gap:7px;}
.pthumb{aspect-ratio:1;border-radius:7px;overflow:hidden;border:2px solid #2a2a38;cursor:pointer;position:relative;transition:border-color .15s;}
.pthumb:hover{border-color:#6c63ff;}
.pthumb img{width:100%;height:100%;object-fit:cover;display:block;}
.pthumb .pdel{position:absolute;top:3px;right:3px;background:rgba(0,0,0,.7);border:none;border-radius:50%;width:18px;height:18px;color:#fff;font-size:9px;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .15s;}
.pthumb:hover .pdel{opacity:1;}

/* Shapes & stickers */
.sgrid{display:grid;grid-template-columns:repeat(4,1fr);gap:7px;}
.sshape{aspect-ratio:1;border-radius:7px;border:1px solid #2a2a38;background:#222;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;transition:all .15s;}
.sshape:hover{border-color:#6c63ff;background:#252535;}
.emgrid{display:grid;grid-template-columns:repeat(5,1fr);gap:5px;}
.embtn{aspect-ratio:1;border-radius:7px;background:#222;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;transition:all .15s;border:1px solid transparent;}
.embtn:hover{border-color:#6c63ff;transform:scale(1.08);}

/* BG swatches */
.bggrid{display:grid;grid-template-columns:repeat(3,1fr);gap:7px;margin-bottom:10px;}
.bgsw{aspect-ratio:4/3;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .15s;}
.bgsw:hover,.bgsw.on{border-color:#6c63ff;}

/* Divider */
.div{height:1px;background:#2a2a38;margin:12px 0;}

/* CANVAS */
.canvas-wrap{flex:1;overflow:auto;background:#0d0d12;display:flex;align-items:flex-start;justify-content:center;padding:28px;}
.canvas-wrap::-webkit-scrollbar{width:8px;height:8px;}
.canvas-wrap::-webkit-scrollbar-thumb{background:#2a2a38;border-radius:99px;}

/* A4 */
#a4{width:794px;min-height:1123px;background:#fff;position:relative;overflow:hidden;box-shadow:0 20px 70px rgba(0,0,0,.8);border-radius:2px;flex-shrink:0;}

/* ELEMENTS */
.el{position:absolute;cursor:move;}
.el.sel .el-inner{outline:2px solid #6c63ff;outline-offset:2px;}
.el-inner{width:100%;height:100%;position:relative;}
.el-txt{width:100%;height:100%;padding:4px 6px;font-size:15px;line-height:1.5;outline:none;white-space:pre-wrap;word-break:break-word;cursor:text;min-width:30px;min-height:20px;}
.el-img{width:100%;height:100%;object-fit:cover;display:block;pointer-events:none;}
.el-svg{width:100%;height:100%;overflow:visible;}
.rh{position:absolute;width:10px;height:10px;background:#6c63ff;border:2px solid #fff;border-radius:2px;bottom:-5px;right:-5px;cursor:se-resize;z-index:10;display:none;}
.dh{position:absolute;top:-11px;right:-11px;width:20px;height:20px;background:#f44;border:2px solid #fff;border-radius:50%;cursor:pointer;font-size:9px;color:#fff;display:none;align-items:center;justify-content:center;z-index:10;}
.el.sel .rh{display:block;}
.el.sel .dh{display:flex;}

/* PROPS */
.props{width:210px;background:#1a1a22;border-left:1px solid #2a2a38;padding:14px;overflow-y:auto;flex-shrink:0;}
.props::-webkit-scrollbar{width:4px;}
.props::-webkit-scrollbar-thumb{background:#2a2a38;border-radius:99px;}
.prow{display:flex;align-items:center;justify-content:space-between;margin-bottom:9px;gap:7px;}
.plbl{font-size:11px;color:#666;flex-shrink:0;}
.pinput{flex:1;background:#222;border:1px solid #2a2a38;border-radius:6px;padding:5px 7px;color:#eee;font-size:11px;text-align:right;font-family:'Outfit',sans-serif;outline:none;}
.pinput:focus{border-color:#6c63ff;}
.oslider{width:100%;-webkit-appearance:none;height:4px;border-radius:99px;background:#2a2a38;outline:none;cursor:pointer;margin-bottom:12px;}
.oslider::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;border-radius:50%;background:#6c63ff;cursor:pointer;border:2px solid #fff;}
.lbtns{display:flex;gap:4px;flex-wrap:wrap;}
.lbtn{flex:1;min-width:55px;padding:6px 4px;border-radius:6px;border:1px solid #2a2a38;background:#222;color:#ccc;font-size:10px;cursor:pointer;text-align:center;transition:all .15s;font-family:'Outfit',sans-serif;}
.lbtn:hover{border-color:#6c63ff;color:#6c63ff;}
.lbtn.red:hover{border-color:#f44;color:#f44;}
.empty-props{font-size:11px;color:#444;text-align:center;margin-top:40px;line-height:1.7;}

/* TOAST */
.toast{position:fixed;bottom:22px;right:22px;background:#1a1a22;border:1px solid #2a2a38;border-left:3px solid #6c63ff;color:#eee;padding:10px 15px;border-radius:9px;font-size:12px;z-index:9999;opacity:0;transform:translateY(6px);transition:all .25s;pointer-events:none;}
.toast.show{opacity:1;transform:translateY(0);}

@media print{
  .topbar,.rail,.side,.props{display:none!important;}
  body{background:#fff;}
  .canvas-wrap{padding:0;background:#fff;}
  #a4{box-shadow:none;width:100%;}
  .el.sel .el-inner{outline:none;}
  .rh,.dh{display:none!important;}
}
</style>
</head>
<body>

<!-- TOPBAR -->
<div class="topbar">
  <div class="logo">Page<b>Craft</b></div>
  <div class="sep"></div>
  <button class="tbtn" onclick="openTemplates()">ğŸ“ Åablonlar (25)</button>
  <button class="tbtn" onclick="addTextEl('body')">T+ Metin</button>
  <button class="tbtn" onclick="undoLast()">â†© Geri Al</button>
  <button class="tbtn" onclick="clearCanvas()">ğŸ—‘ Temizle</button>
  <div class="sp"></div>
  <button class="tbtn pri" onclick="window.print()">ğŸ–¨ï¸ YazdÄ±r / PDF</button>
</div>

<div class="main">
  <!-- ICON RAIL -->
  <div class="rail">
    <div class="rail-btn on" id="rb_tpl" onclick="showPanel('tpl',this)" title="Åablonlar">ğŸ“<span>Åablon</span></div>
    <div class="rail-btn" id="rb_txt" onclick="showPanel('txt',this)" title="Metin">T<span>Metin</span></div>
    <div class="rail-btn" id="rb_img" onclick="showPanel('img',this)" title="FotoÄŸraf">ğŸ–¼<span>Foto</span></div>
    <div class="rail-btn" id="rb_shp" onclick="showPanel('shp',this)" title="Åekiller">â—»<span>Åekil</span></div>
    <div class="rail-btn" id="rb_stk" onclick="showPanel('stk',this)" title="Etiket">â­<span>Etiket</span></div>
    <div class="rail-btn" id="rb_bg" onclick="showPanel('bg',this)" title="Arkaplan">ğŸ¨<span>Arkaplan</span></div>
    <div class="rail-btn" id="rb_fnt" onclick="showPanel('fnt',this)" title="YazÄ±">Aa<span>YazÄ±</span></div>
  </div>

  <!-- SIDE PANEL -->
  <div class="side" id="sidePanel">
    <!-- filled by JS -->
  </div>

  <!-- A4 CANVAS -->
  <div class="canvas-wrap" id="cw" onclick="deselect(event)">
    <div id="a4"></div>
  </div>

  <!-- PROPS -->
  <div class="props" id="props">
    <div class="plabel">Ã–zellikler</div>
    <div class="empty-props" id="emptyProps">Bir eleman seÃ§in</div>
    <div id="propsFill" style="display:none"></div>
  </div>
</div>

<div class="toast" id="toast"></div>

<!-- TEMPLATE MODAL -->
<div id="tplModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:500;overflow:auto;padding:40px 20px;">
  <div style="background:#1a1a22;border:1px solid #2a2a38;border-radius:14px;width:720px;max-width:100%;margin:0 auto;padding:24px;">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;">
      <div style="font-family:'Syne',sans-serif;font-size:20px;font-weight:800;">ğŸ“ Åablon SeÃ§in â€” 25 Format</div>
      <button onclick="closeTplModal()" style="background:#333;border:none;color:#aaa;border-radius:6px;padding:6px 12px;cursor:pointer;font-size:13px;">âœ• Kapat</button>
    </div>
    <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:10px;" id="tplModalGrid"></div>
  </div>
</div>

<script>
// ===== STATE =====
var els = [];
var selId = null;
var undoStack = [];
var photos = [];
var elCount = 0;
var dragging = false;
var resizing = false;
var dragOff = {x:0,y:0};
var resStart = {x:0,y:0,w:0,h:0};
var currentPanel = 'tpl';

var A4 = document.getElementById('a4');

// ===== PANEL SYSTEM =====
function showPanel(name, btn) {
  currentPanel = name;
  document.querySelectorAll('.rail-btn').forEach(function(b){b.classList.remove('on');});
  btn.classList.add('on');
  renderPanel(name);
}

function renderPanel(name) {
  var sp = document.getElementById('sidePanel');
  var html = '';
  if(name==='tpl') {
    html = '<div class="pblock"><div class="plabel">Åablonlar</div><div class="tgrid">' +
      TEMPLATES.map(function(t){
        return '<div class="tcard" onclick="applyTpl(\''+t.id+'\')"><div class="tcard-icon">'+t.icon+'</div><div class="tcard-name">'+t.name+'</div></div>';
      }).join('') + '</div></div>';
  } else if(name==='txt') {
    html = '<div class="pblock"><div class="plabel">Metin Ekle</div>' +
      [['heading','BÃ¼yÃ¼k BaÅŸlÄ±k','36px, KalÄ±n'],['sub','Alt BaÅŸlÄ±k','20px, Orta'],['body','Paragraf','14px, Normal'],['caption','AÃ§Ä±klama','11px, Hafif'],['quote','"AlÄ±ntÄ±"','16px, Ä°talik'],['num','1. NumaralÄ±','14px, Liste']].map(function(v){
        return '<div class="tcard" style="text-align:left;padding:10px 12px;margin-bottom:7px;" onclick="addTextEl(\''+v[0]+'\')"><div style="font-weight:600;color:#eee;font-size:13px;">'+v[1]+'</div><div style="font-size:10px;color:#555;margin-top:2px;">'+v[2]+'</div></div>';
      }).join('') + '</div>';
  } else if(name==='img') {
    html = '<div class="pblock"><div class="plabel">FotoÄŸraflar</div>' +
      '<div class="drop-area" id="dropArea"><input type="file" accept="image/*" multiple onchange="uploadPhotos(this.files)"><div style="font-size:28px;margin-bottom:6px;">ğŸ“·</div><div style="font-size:12px;color:#666;">FotoÄŸraf ekle veya<br><b style="color:#6c63ff">sÃ¼rÃ¼kle bÄ±rak</b></div></div>' +
      '<div class="pgrid" id="photoGrid"></div></div>';
  } else if(name==='shp') {
    var shapes = [['rect','â–¬'],['circle','â—'],['triangle','â–²'],['diamond','â—†'],['star','â˜…'],['line','â”'],['rounded','â–£'],['hexagon','â¬¡'],['arrow','â¤'],['hr','â•'],['wave','ã€œ'],['plus','âœš']];
    html = '<div class="pblock"><div class="plabel">Åekiller</div><div class="sgrid">' +
      shapes.map(function(s){return '<div class="sshape" onclick="addShape(\''+s[0]+\')">'+s[1]+'</div>';}).join('') +
      '</div><div class="div"></div><div class="plabel">Renk</div><div class="crow">' +
      ['#6c63ff','#ff6584','#f5c842','#38ef7d','#2193b0','#1a1a2e','#fff','#f44','#ff8c42','#a855f7','#11998e','#e65100'].map(function(c){
        return '<div class="cdot" style="background:'+c+'" onclick="applyShapeColor(\''+c+'\')"></div>';
      }).join('') +
      '</div><div class="cinput"><input type="color" value="#6c63ff" oninput="applyShapeColor(this.value)"><input type="text" value="#6c63ff" placeholder="#renk" oninput="applyShapeColor(this.value)"></div></div>';
  } else if(name==='stk') {
    var stks = ['â­','ğŸ”¥','ğŸ’¡','âœ…','âŒ','âš ï¸','ğŸ¯','ğŸ“Œ','ğŸ”‘','ğŸ’','ğŸš€','ğŸŒŸ','ğŸ’ª','ğŸ‰','ğŸ†','âœ¨','ğŸ¨','ğŸ“','ğŸ””','ğŸ’¼','ğŸ‘','â¤ï¸','ğŸŒ™','â˜€ï¸','âš¡','ğŸ­','ğŸŒˆ','ğŸ’¬','ğŸ”','ğŸ“Š'];
    html = '<div class="pblock"><div class="plabel">Ã‡Ä±kartmalar</div><div class="emgrid">' +
      stks.map(function(s){return '<div class="embtn" onclick="addSticker(\''+s+'\')">'+s+'</div>';}).join('') + '</div></div>';
  } else if(name==='bg') {
    var bgs = [
      {s:'background:#fff',l:'Beyaz'},{s:'background:#faf8f3',l:'Krem'},{s:'background:#f0f0f5',l:'Gri'},
      {s:'background:#1a1a2e',l:'Lacivert'},{s:'background:#111',l:'Siyah'},{s:'background:#fffde7',l:'SarÄ±'},
      {s:'background:linear-gradient(135deg,#6c63ff,#a855f7)',l:'Mor'},{s:'background:linear-gradient(135deg,#ff6584,#ff8c42)',l:'Turuncu'},
      {s:'background:linear-gradient(135deg,#11998e,#38ef7d)',l:'YeÅŸil'},{s:'background:linear-gradient(135deg,#2193b0,#6dd5ed)',l:'Mavi'},
      {s:'background:#fff;background-image:repeating-linear-gradient(0deg,transparent,transparent 27px,#ddd 28px)',l:'Ã‡izgili'},
      {s:'background:#fff;background-image:linear-gradient(#e5e5e5 1px,transparent 1px),linear-gradient(90deg,#e5e5e5 1px,transparent 1px);background-size:28px 28px',l:'Kareli'},
    ];
    html = '<div class="pblock"><div class="plabel">Arkaplan</div><div class="bggrid">' +
      bgs.map(function(b,i){return '<div class="bgsw" style="'+b.s+'" title="'+b.l+'" onclick="applyBg('+i+')"></div>';}).join('') +
      '</div><div class="cinput" style="margin-top:4px;"><input type="color" value="#ffffff" oninput="A4.style.background=this.value"><input type="text" placeholder="#ffffff veya renk" oninput="A4.style.background=this.value"></div></div>';
    window._bgs = bgs;
  } else if(name==='fnt') {
    html = '<div class="pblock"><div class="plabel">YazÄ± Tipi</div>' +
      '<select class="sselect" style="margin-bottom:8px;" onchange="applyFF(this.value)">' +
      ["'Outfit',sans-serif","'Syne',sans-serif","Georgia,serif","'Times New Roman',serif","'Courier New',monospace","Arial,sans-serif","Verdana,sans-serif"].map(function(f){
        return '<option value="'+f+'">'+f.split(',')[0].replace(/'/g,'')+'</option>';}).join('') +
      '</select>' +
      '<div class="plabel">Boyut</div>' +
      '<select class="sselect" style="margin-bottom:8px;" onchange="applyFS(this.value)">' +
      [8,10,11,12,13,14,16,18,20,22,24,28,32,36,40,48,56,64,72,80,96].map(function(s){return '<option value="'+s+'px"'+(s===14?' selected':'')+'>'+s+'</option>';}).join('') +
      '</select>' +
      '<div class="plabel">Stil</div>' +
      '<div class="sbtns">' +
      '<button class="sbtn" onclick="applyBold()" title="KalÄ±n"><b>B</b></button>' +
      '<button class="sbtn" onclick="applyItalic()" title="Ä°talik"><i>I</i></button>' +
      '<button class="sbtn" onclick="applyUnderline()" title="AltÄ± Ã‡izili"><u>U</u></button>' +
      '</div>' +
      '<div class="plabel">Hizala</div>' +
      '<div class="abtns">' +
      '<button class="abtn" onclick="applyAlign(\'left\')" title="Sol">â‰¡</button>' +
      '<button class="abtn" onclick="applyAlign(\'center\')" title="Orta">â‰¡</button>' +
      '<button class="abtn" onclick="applyAlign(\'right\')" title="SaÄŸ">â‰¡</button>' +
      '</div>' +
      '<div class="plabel">YazÄ± Rengi</div>' +
      '<div class="crow">' +
      ['#1a1a1a','#fff','#6c63ff','#ff6584','#f5c842','#38ef7d','#2193b0','#f44','#888','#000','#a855f7','#e65100'].map(function(c){
        return '<div class="cdot" style="background:'+c+';'+(c==='#fff'?'border:1px solid #333;':'')+'" onclick="applyTC(\''+c+'\')"></div>';
      }).join('')+'</div>' +
      '<div class="cinput"><input type="color" value="#1a1a1a" oninput="applyTC(this.value)"><input type="text" value="#1a1a1a" oninput="applyTC(this.value)"></div>' +
      '</div>';
  }
  sp.innerHTML = html;
  if(name==='img') {
    setupDrop();
    renderPhotoGrid();
  }
}

// ===== PHOTOS =====
function setupDrop() {
  var da = document.getElementById('dropArea');
  if(!da) return;
  da.addEventListener('dragover',function(e){e.preventDefault();da.classList.add('ov');});
  da.addEventListener('dragleave',function(){da.classList.remove('ov');});
  da.addEventListener('drop',function(e){e.preventDefault();da.classList.remove('ov');uploadPhotos(e.dataTransfer.files);});
}
function uploadPhotos(files) {
  Array.from(files).forEach(function(f){
    var r = new FileReader();
    r.onload = function(e){photos.push(e.target.result);renderPhotoGrid();toast('ğŸ–¼ FotoÄŸraf eklendi â€” tÄ±klayarak yerleÅŸtir');};
    r.readAsDataURL(f);
  });
}
function renderPhotoGrid() {
  var g = document.getElementById('photoGrid');
  if(!g) return;
  g.innerHTML = photos.map(function(src,i){
    return '<div class="pthumb" onclick="addImgEl(\''+i+'\')">' +
      '<img src="'+src+'">' +
      '<button class="pdel" onclick="event.stopPropagation();photos.splice('+i+',1);renderPhotoGrid()">âœ•</button></div>';
  }).join('');
}

// ===== CREATE ELEMENT =====
function makeEl(type, cfg) {
  saveUndo();
  var id = 'e'+(++elCount);
  var el = {id:id,type:type,x:cfg.x||60,y:cfg.y||60,w:cfg.w||200,h:cfg.h||50,cnt:cfg.cnt||'',style:cfg.style||{},shp:cfg.shp||null,imgIdx:cfg.imgIdx!=null?cfg.imgIdx:null,z:els.length+1};
  els.push(el);
  renderEl(el);
  return el;
}

function renderEl(el) {
  var old = document.getElementById(el.id);
  if(old) old.remove();

  var div = document.createElement('div');
  div.className = 'el';
  div.id = el.id;
  div.style.left = el.x+'px';
  div.style.top = el.y+'px';
  div.style.width = el.w+'px';
  div.style.height = el.h+'px';
  div.style.zIndex = el.z;

  var inner = document.createElement('div');
  inner.className = 'el-inner';

  if(el.type==='text') {
    var t = document.createElement('div');
    t.className = 'el-txt';
    t.contentEditable = 'true';
    t.innerHTML = el.cnt;
    var s = el.style;
    if(s.fontSize) t.style.fontSize = s.fontSize;
    if(s.fontWeight) t.style.fontWeight = s.fontWeight;
    if(s.fontStyle) t.style.fontStyle = s.fontStyle;
    if(s.fontFamily) t.style.fontFamily = s.fontFamily;
    if(s.color) t.style.color = s.color;
    if(s.textAlign) t.style.textAlign = s.textAlign;
    if(s.textDecoration) t.style.textDecoration = s.textDecoration;
    if(s.lineHeight) t.style.lineHeight = s.lineHeight;
    if(s.background) t.style.background = s.background;
    if(s.padding) t.style.padding = s.padding;
    t.addEventListener('input',function(){el.cnt=t.innerHTML;});
    t.addEventListener('mousedown',function(e){e.stopPropagation();});
    inner.appendChild(t);
  } else if(el.type==='image') {
    var img = document.createElement('img');
    img.className = 'el-img';
    img.src = photos[el.imgIdx];
    inner.appendChild(img);
  } else if(el.type==='shape') {
    var svg = makeSVG(el);
    inner.appendChild(svg);
  } else if(el.type==='sticker') {
    var sd = document.createElement('div');
    sd.style.cssText = 'width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:'+(el.h*0.65)+'px;';
    sd.textContent = el.cnt;
    inner.appendChild(sd);
  }

  var rh = document.createElement('div');
  rh.className = 'rh';
  rh.addEventListener('mousedown',startResize);
  inner.appendChild(rh);

  var dh = document.createElement('div');
  dh.className = 'dh';
  dh.textContent = 'âœ•';
  dh.addEventListener('mousedown',function(e){e.stopPropagation();deleteEl(el.id);});
  inner.appendChild(dh);

  div.appendChild(inner);
  div.addEventListener('mousedown',startDrag);
  A4.appendChild(div);
}

function makeSVG(el) {
  var svg = document.createElementNS('http://www.w3.org/2000/svg','svg');
  svg.setAttribute('width','100%');
  svg.setAttribute('height','100%');
  svg.style.overflow = 'visible';
  var c = (el.style&&el.style.fill)||'#6c63ff';
  var m = {
    rect:'<rect x="1" y="1" width="99%" height="99%" fill="'+c+'"/>',
    rounded:'<rect x="1" y="1" width="99%" height="99%" rx="10" ry="10" fill="'+c+'"/>',
    circle:'<ellipse cx="50%" cy="50%" rx="49%" ry="49%" fill="'+c+'"/>',
    triangle:'<polygon points="50%,2% 98%,98% 2%,98%" fill="'+c+'"/>',
    diamond:'<polygon points="50%,2% 98%,50% 50%,98% 2%,50%" fill="'+c+'"/>',
    star:'<polygon points="50%,5% 61%,35% 98%,35% 68%,57% 79%,91% 50%,70% 21%,91% 32%,57% 2%,35% 39%,35%" fill="'+c+'"/>',
    line:'<line x1="0" y1="50%" x2="100%" y2="50%" stroke="'+c+'" stroke-width="4"/>',
    hr:'<line x1="0" y1="35%" x2="100%" y2="35%" stroke="'+c+'" stroke-width="2"/><line x1="0" y1="65%" x2="100%" y2="65%" stroke="'+c+'" stroke-width="2"/>',
    arrow:'<polygon points="60%,15% 98%,50% 60%,85% 60%,65% 2%,65% 2%,35% 60%,35%" fill="'+c+'"/>',
    hexagon:'<polygon points="25%,2% 75%,2% 98%,50% 75%,98% 25%,98% 2%,50%" fill="'+c+'"/>',
    wave:'<path d="M0,50% Q25%,10% 50%,50% T100%,50%" fill="none" stroke="'+c+'" stroke-width="4"/>',
    plus:'<rect x="40%" y="5%" width="20%" height="90%" fill="'+c+'"/><rect x="5%" y="40%" width="90%" height="20%" fill="'+c+'"/>',
  };
  svg.innerHTML = m[el.shp] || m.rect;
  return svg;
}

// ===== DRAG =====
function startDrag(e) {
  if(e.target.classList.contains('rh') || e.target.classList.contains('dh')) return;
  var div = e.currentTarget;
  selectEl(div.id);
  if(e.target.contentEditable==='true') return;
  dragging = true;
  dragOff.x = e.clientX - div.offsetLeft;
  dragOff.y = e.clientY - div.offsetTop;
  e.preventDefault();
  document.addEventListener('mousemove',onDrag);
  document.addEventListener('mouseup',stopDrag);
}
function onDrag(e) {
  if(!dragging||!selId) return;
  var div = document.getElementById(selId);
  if(!div) return;
  var el = getEl(selId);
  el.x = Math.max(0,e.clientX-dragOff.x);
  el.y = Math.max(0,e.clientY-dragOff.y);
  div.style.left = el.x+'px';
  div.style.top = el.y+'px';
  refreshProps();
}
function stopDrag() {dragging=false;document.removeEventListener('mousemove',onDrag);document.removeEventListener('mouseup',stopDrag);}

// ===== RESIZE =====
function startResize(e) {
  e.stopPropagation();
  isResizing = true;
  var div = document.getElementById(selId);
  resStart = {x:e.clientX,y:e.clientY,w:div.offsetWidth,h:div.offsetHeight};
  document.addEventListener('mousemove',onResize);
  document.addEventListener('mouseup',stopResize);
}
function onResize(e) {
  if(!isResizing||!selId) return;
  var el = getEl(selId);
  var div = document.getElementById(selId);
  el.w = Math.max(30,resStart.w+(e.clientX-resStart.x));
  el.h = Math.max(15,resStart.h+(e.clientY-resStart.y));
  div.style.width = el.w+'px';
  div.style.height = el.h+'px';
  // update sticker font size
  if(el.type==='sticker') {
    var sd = div.querySelector('div');
    if(sd) sd.style.fontSize = (el.h*0.65)+'px';
  }
  refreshProps();
}
function stopResize() {isResizing=false;document.removeEventListener('mousemove',onResize);document.removeEventListener('mouseup',stopResize);}

// ===== SELECT =====
function selectEl(id) {
  deselect();
  selId = id;
  var div = document.getElementById(id);
  if(div) div.classList.add('sel');
  refreshProps();
}
function deselect(e) {
  if(e && e.target.closest&&(e.target.closest('.el')||e.target.closest('.props'))) return;
  document.querySelectorAll('.el').forEach(function(d){d.classList.remove('sel');});
  selId = null;
  document.getElementById('emptyProps').style.display = 'block';
  document.getElementById('propsFill').style.display = 'none';
}
function getEl(id){return els.find(function(e){return e.id===id;});}

function deleteEl(id) {
  saveUndo();
  els = els.filter(function(e){return e.id!==id;});
  var d = document.getElementById(id); if(d) d.remove();
  selId=null;
  deselect();
}

function refreshProps() {
  if(!selId) return;
  var el = getEl(selId);
  if(!el) return;
  document.getElementById('emptyProps').style.display = 'none';
  var pf = document.getElementById('propsFill');
  pf.style.display = 'block';
  pf.innerHTML =
    '<div class="prow"><span class="plbl">X</span><input class="pinput" type="number" value="'+Math.round(el.x)+'" onchange="moveProp(\'x\',this.value)"></div>'+
    '<div class="prow"><span class="plbl">Y</span><input class="pinput" type="number" value="'+Math.round(el.y)+'" onchange="moveProp(\'y\',this.value)"></div>'+
    '<div class="prow"><span class="plbl">GeniÅŸlik</span><input class="pinput" type="number" value="'+Math.round(el.w)+'" onchange="sizeProp(\'w\',this.value)"></div>'+
    '<div class="prow"><span class="plbl">YÃ¼kseklik</span><input class="pinput" type="number" value="'+Math.round(el.h)+'" onchange="sizeProp(\'h\',this.value)"></div>'+
    '<div class="plbl" style="margin-bottom:4px;">OpaklÄ±k</div>'+
    '<input class="oslider" type="range" min="0" max="100" value="'+Math.round((el.style.opacity!=null?el.style.opacity:1)*100)+'" oninput="applyOpacity(this.value)">'+
    '<div class="div"></div>'+
    '<div class="plbl" style="margin-bottom:6px;">Katmanlar</div>'+
    '<div class="lbtns">'+
    '<button class="lbtn" onclick="bringF()">Ã–ne</button>'+
    '<button class="lbtn" onclick="sendB()">Arkaya</button>'+
    '<button class="lbtn" onclick="dupEl()">Kopyala</button>'+
    '<button class="lbtn red" onclick="deleteEl(\''+el.id+'\')">Sil</button>'+
    '</div>';
}

function moveProp(ax,v){var el=getEl(selId);if(!el)return;el[ax==='x'?'x':'y']=+v;var d=document.getElementById(selId);if(d)d.style[ax==='x'?'left':'top']=v+'px';}
function sizeProp(d,v){var el=getEl(selId);if(!el)return;el[d]=+v;var div=document.getElementById(selId);if(div)div.style[d==='w'?'width':'height']=v+'px';}
function applyOpacity(v){var el=getEl(selId);if(!el)return;el.style.opacity=v/100;var d=document.getElementById(selId);if(d)d.style.opacity=v/100;}
function bringF(){var el=getEl(selId);if(!el)return;var mx=Math.max.apply(null,els.map(function(e){return e.z;}))+1;el.z=mx;document.getElementById(selId).style.zIndex=mx;}
function sendB(){var el=getEl(selId);if(!el)return;var mn=Math.max(1,Math.min.apply(null,els.map(function(e){return e.z;}))-1);el.z=mn;document.getElementById(selId).style.zIndex=mn;}
function dupEl(){var el=getEl(selId);if(!el)return;var ne=makeEl(el.type,{x:el.x+18,y:el.y+18,w:el.w,h:el.h,cnt:el.cnt,style:Object.assign({},el.style),shp:el.shp,imgIdx:el.imgIdx});selectEl(ne.id);}

// ===== STYLE APPLY =====
function applyToSel(fn){if(!selId)return;var el=getEl(selId);if(!el)return;fn(el,document.getElementById(selId));}
function getTxt(div){return div?div.querySelector('.el-txt'):null;}

function applyTC(c){applyToSel(function(el,div){el.style.color=c;var t=getTxt(div);if(t)t.style.color=c;});}
function applyFF(f){applyToSel(function(el,div){el.style.fontFamily=f;var t=getTxt(div);if(t)t.style.fontFamily=f;});}
function applyFS(s){applyToSel(function(el,div){el.style.fontSize=s;var t=getTxt(div);if(t)t.style.fontSize=s;});}
function applyBold(){applyToSel(function(el,div){var t=getTxt(div);if(!t)return;var cur=window.getComputedStyle(t).fontWeight;var nb=(cur==='700'||cur==='bold')?'400':'700';t.style.fontWeight=nb;el.style.fontWeight=nb;});}
function applyItalic(){applyToSel(function(el,div){var t=getTxt(div);if(!t)return;var cur=window.getComputedStyle(t).fontStyle;var ni=cur==='italic'?'normal':'italic';t.style.fontStyle=ni;el.style.fontStyle=ni;});}
function applyUnderline(){applyToSel(function(el,div){var t=getTxt(div);if(!t)return;var cur=t.style.textDecoration;t.style.textDecoration=cur==='underline'?'none':'underline';});}
function applyAlign(a){applyToSel(function(el,div){var t=getTxt(div);if(t){t.style.textAlign=a;el.style.textAlign=a;}});}
function applyShapeColor(c){applyToSel(function(el,div){if(el.type!=='shape')return;el.style.fill=c;var svg=div.querySelector('svg');if(svg){var ns=makeSVG(el);div.querySelector('.el-inner').replaceChild(ns,svg);}});}
function applyBg(i){if(!window._bgs)return;var bg=window._bgs[i];if(!bg)return;A4.setAttribute('style','');A4.style.cssText='width:794px;min-height:1123px;position:relative;overflow:hidden;box-shadow:0 20px 70px rgba(0,0,0,.8);border-radius:2px;flex-shrink:0;'+bg.s;toast('ğŸ¨ Arkaplan deÄŸiÅŸtirildi');}

// ===== ADD ELEMENTS =====
function addTextEl(v) {
  var map = {
    heading:{cnt:'BÃ¼yÃ¼k BaÅŸlÄ±k',style:{fontSize:'34px',fontWeight:'700',fontFamily:"'Syne',sans-serif",color:'#1a1a1a'},w:450,h:60},
    sub:{cnt:'Alt BaÅŸlÄ±k',style:{fontSize:'20px',fontWeight:'600',fontFamily:"'Outfit',sans-serif",color:'#1a1a1a'},w:350,h:40},
    body:{cnt:'Metninizi buraya yazÄ±n...',style:{fontSize:'14px',fontFamily:"'Outfit',sans-serif",color:'#2a2a2a',lineHeight:'1.7'},w:350,h:70},
    caption:{cnt:'AÃ§Ä±klama metni',style:{fontSize:'11px',color:'#888'},w:220,h:28},
    quote:{cnt:'"AlÄ±ntÄ± metni buraya gelir"',style:{fontSize:'16px',fontStyle:'italic',color:'#555',fontFamily:'Georgia,serif'},w:340,h:55},
    num:{cnt:'1. Liste maddesi',style:{fontSize:'14px',color:'#2a2a2a',lineHeight:'1.7'},w:300,h:36},
  };
  var cfg = map[v]||map.body;
  var ne = makeEl('text',{cnt:cfg.cnt,style:cfg.style,w:cfg.w,h:cfg.h,x:60,y:60+els.length*12});
  selectEl(ne.id);
  toast('T Metin eklendi');
}

function addShape(shp) {
  var ne = makeEl('shape',{shp:shp,style:{fill:'#6c63ff'},w:130,h:80,x:80,y:80+els.length*8});
  selectEl(ne.id);
  toast('â—» Åekil eklendi');
}

function addSticker(em) {
  var ne = makeEl('sticker',{cnt:em,w:60,h:60,x:100,y:100+els.length*6});
  selectEl(ne.id);
  toast(em+' Eklendi');
}

function addImgEl(idx) {
  var ne = makeEl('image',{imgIdx:parseInt(idx),w:220,h:170,x:80,y:80+els.length*8});
  selectEl(ne.id);
  toast('ğŸ–¼ FotoÄŸraf eklendi');
}

// ===== UNDO =====
function saveUndo() {undoStack.push(A4.innerHTML);if(undoStack.length>25)undoStack.shift();}
function undoLast() {if(!undoStack.length)return;A4.innerHTML=undoStack.pop();els=[];selId=null;toast('â†© Geri alÄ±ndÄ±');}

// ===== CLEAR =====
function clearCanvas(){saveUndo();A4.innerHTML='';els=[];selId=null;A4.style.background='#fff';toast('ğŸ—‘ Temizlendi');}

// ===== TEMPLATES =====
var TEMPLATES = [
  {id:'blank',icon:'â¬œ',name:'BoÅŸ Sayfa'},
  {id:'summary',icon:'ğŸ“',name:'Ã–zet'},
  {id:'bullets',icon:'ğŸ“‹',name:'Maddeler'},
  {id:'mindmap',icon:'ğŸ§ ',name:'Beyin HaritasÄ±'},
  {id:'report',icon:'ğŸ“Š',name:'Rapor'},
  {id:'table',icon:'ğŸ“',name:'Tablo'},
  {id:'notes',icon:'ğŸ—’ï¸',name:'Defter'},
  {id:'resume',icon:'ğŸ‘¤',name:'CV'},
  {id:'timeline',icon:'â±ï¸',name:'Zaman Ã‡izelgesi'},
  {id:'cover',icon:'ğŸ¨',name:'Kapak'},
  {id:'invoice',icon:'ğŸ§¾',name:'Fatura'},
  {id:'poster',icon:'ğŸ“Œ',name:'AfiÅŸ'},
  {id:'recipe',icon:'ğŸ³',name:'Tarif'},
  {id:'flyer',icon:'ğŸ“¢',name:'El Ä°lanÄ±'},
  {id:'newsletter',icon:'ğŸ“°',name:'BÃ¼lten'},
  {id:'certificate',icon:'ğŸ†',name:'Sertifika'},
  {id:'quiz',icon:'â“',name:'SÄ±nav'},
  {id:'schedule',icon:'ğŸ“…',name:'Program'},
  {id:'proposal',icon:'ğŸ’¼',name:'Teklif'},
  {id:'journal',icon:'ğŸ“–',name:'GÃ¼nlÃ¼k'},
  {id:'comparison',icon:'âš–ï¸',name:'KarÅŸÄ±laÅŸtÄ±rma'},
  {id:'swot',icon:'ğŸ”·',name:'SWOT'},
  {id:'kanban',icon:'ğŸ—‚ï¸',name:'Kanban'},
  {id:'infographic',icon:'ğŸ“ˆ',name:'Ä°nfografik'},
  {id:'moodboard',icon:'âœ¨',name:'Mood Board'},
];

function openTemplates(){
  var g = document.getElementById('tplModalGrid');
  g.innerHTML = TEMPLATES.map(function(t){
    return '<div onclick="applyTpl(\''+t.id+'\');closeTplModal()" style="background:#222;border:1.5px solid #2a2a38;border-radius:10px;padding:14px 8px;cursor:pointer;text-align:center;transition:all .15s;" onmouseover="this.style.borderColor=\'#6c63ff\'" onmouseout="this.style.borderColor=\'#2a2a38\'">' +
      '<div style="font-size:26px;margin-bottom:6px;">'+t.icon+'</div>' +
      '<div style="font-size:11px;color:#aaa;font-weight:600;">'+t.name+'</div></div>';
  }).join('');
  document.getElementById('tplModal').style.display = 'block';
}
function closeTplModal(){document.getElementById('tplModal').style.display='none';}

function applyTpl(id) {
  clearCanvas(true);
  var fn = TPL_FNS[id];
  if(fn) fn();
  toast('ğŸ“ '+id+' ÅŸablonu yÃ¼klendi!');
}

// helper: quick text element
function qt(text,x,y,w,h,s){
  return makeEl('text',{cnt:text,x:x,y:y,w:w||300,h:h||36,style:s||{}});
}
// helper: quick shape
function qs(shp,x,y,w,h,fill){
  return makeEl('shape',{shp:shp,x:x,y:y,w:w,h:h,style:{fill:fill||'#6c63ff'}});
}

var TPL_FNS = {
  blank: function(){},
  summary: function(){
    A4.style.background='#fff';
    qt('<b>BAÅLIK BURAYA</b>',60,55,670,58,{fontSize:'30px',fontFamily:"'Syne',sans-serif",fontWeight:'800',color:'#1a1a1a'});
    qt('Tarih Â· Yazar Â· Kaynak',60,122,450,24,{fontSize:'12px',color:'#999'});
    qs('line',60,152,670,5,'#1a1a2e');
    qt('Birinci paragraf metni buraya gelir. Konuya giriÅŸ yapÄ±n ve temel bilgileri aktarÄ±n.',60,168,670,70,{fontSize:'14px',lineHeight:'1.8',color:'#2a2a2a'});
    qt('Ä°kinci paragraf daha fazla detay iÃ§erir. Ek aÃ§Ä±klamalar buraya yazÄ±lÄ±r.',60,248,670,70,{fontSize:'14px',lineHeight:'1.8',color:'#2a2a2a'});
    qt('SonuÃ§ cÃ¼mlesi buraya gelir.',60,328,670,40,{fontSize:'14px',lineHeight:'1.8',color:'#2a2a2a'});
  },
  bullets: function(){
    A4.style.background='#fff';
    qt('ğŸ“‹ MADDE MADDE',60,50,600,52,{fontSize:'26px',fontWeight:'800',color:'#1a1a2e',fontFamily:"'Syne',sans-serif"});
    qs('rect',60,110,670,4,'#6c63ff');
    var y=126;
    [['BÃ–LÃœM 1',['â€¢ Birinci madde iÃ§eriÄŸi','â€¢ Ä°kinci madde iÃ§eriÄŸi','â€¢ ÃœÃ§Ã¼ncÃ¼ madde iÃ§eriÄŸi']],
     ['BÃ–LÃœM 2',['â€¢ DÃ¶rdÃ¼ncÃ¼ madde','â€¢ BeÅŸinci madde','â€¢ AltÄ±ncÄ± madde']],
     ['BÃ–LÃœM 3',['â€¢ Yedinci madde','â€¢ Sekizinci madde']]].forEach(function(sec){
      qt(sec[0],60,y,400,26,{fontSize:'10px',fontWeight:'700',color:'#6c63ff',letterSpacing:'2px'});
      y+=32;
      sec[1].forEach(function(item){
        qt(item,72,y,630,28,{fontSize:'13.5px',color:'#2a2a2a',lineHeight:'1.7'});
        y+=32;
      });
      y+=14;
    });
  },
  mindmap: function(){
    A4.style.background='#f8f8ff';
    qt('ğŸ§  Beyin HaritasÄ±',200,30,394,44,{fontSize:'22px',fontWeight:'800',fontFamily:"'Syne',sans-serif",color:'#1a1a2e',textAlign:'center'});
    qs('circle',297,440,200,120,'#6c63ff');
    qt('MERKEZ<br>KONU',315,488,165,30,{fontSize:'13px',fontWeight:'700',color:'#fff',textAlign:'center'});
    var nodes=[{t:'Dal 1',x:55,y:305},{t:'Dal 2',x:515,y:305},{t:'Dal 3',x:55,y:510},{t:'Dal 4',x:515,y:510},{t:'Dal 5',x:180,y:195},{t:'Dal 6',x:415,y:195},{t:'Dal 7',x:165,y:695},{t:'Dal 8',x:445,y:695}];
    nodes.forEach(function(n){
      qs('rounded',n.x,n.y,145,50,'#fff');
      qt(n.t,n.x+6,n.y+13,132,28,{fontSize:'12px',fontWeight:'600',color:'#1a1a2e',textAlign:'center'});
    });
  },
  report: function(){
    qs('rect',0,0,794,90,'#1a1a2e');
    qt('RAPOR BAÅLIÄI',60,18,550,55,{fontSize:'26px',fontWeight:'800',color:'#fff',fontFamily:"'Syne',sans-serif"});
    qt(new Date().toLocaleDateString('tr-TR'),580,34,154,28,{fontSize:'12px',color:'rgba(255,255,255,.5)',textAlign:'right'});
    ['GÄ°RÄ°Å','ANALÄ°Z','BULGULAR','SONUÃ‡'].forEach(function(s,i){
      var y=130+i*200;
      qs('rect',60,y,5,55,'#f5c842');
      qt(s,74,y,250,26,{fontSize:'11px',fontWeight:'700',color:'#1a1a2e',letterSpacing:'2px'});
      qt('Bu bÃ¶lÃ¼mÃ¼n iÃ§eriÄŸi buraya yazÄ±lÄ±r. Detaylar eklenir.',74,y+30,640,55,{fontSize:'13px',color:'#2a2a2a',lineHeight:'1.7'});
    });
  },
  table: function(){
    A4.style.background='#fff';
    qt('ğŸ“ VERÄ° TABLOSU',60,50,500,48,{fontSize:'24px',fontWeight:'800',color:'#1a1a2e',fontFamily:"'Syne',sans-serif"});
    qs('rect',60,108,670,36,'#1a1a2e');
    ['#','BAÅLIK 1','BAÅLIK 2','BAÅLIK 3'].forEach(function(h,i){qt(h,68+i*165,116,155,20,{fontSize:'10px',fontWeight:'700',color:'#fff',letterSpacing:'1px'});});
    for(var r=0;r<7;r++){
      var ry=144+r*36;
      qs('rect',60,ry,670,36,r%2===0?'#f8f8f8':'#fff');
      [r+1,'Veri','DeÄŸer','Not'].forEach(function(d,i){qt(String(d),68+i*165,ry+8,155,22,{fontSize:'13px',color:'#2a2a2a'});});
    }
  },
  notes: function(){
    A4.style.background='#fffdf0';
    qs('rect',0,0,794,6,'#e87040');
    qt('ğŸ“ NOTLAR',60,24,300,48,{fontSize:'28px',fontWeight:'800',color:'#2a2a2a',fontFamily:'Georgia,serif'});
    qt(new Date().toLocaleDateString('tr-TR'),500,40,230,24,{fontSize:'12px',color:'#bbb',textAlign:'right'});
    for(var i=0;i<16;i++){
      qs('line',60,96+i*54,670,2,'#e8e4c8');
      qt('',68,100+i*54,658,40,{fontSize:'14px',color:'#3a3a2a'});
    }
  },
  resume: function(){
    qs('rect',0,0,794,140,'#1a1a2e');
    qt('AD SOYAD',40,36,400,52,{fontSize:'30px',fontWeight:'800',color:'#fff',fontFamily:"'Syne',sans-serif"});
    qt('Ãœnvan / Pozisyon',40,95,300,32,{fontSize:'15px',color:'rgba(255,255,255,.6)'});
    qt('ğŸ“§ email@email.com  â€¢  ğŸ“± 555 123 4567',40,156,560,26,{fontSize:'12px',color:'#666'});
    qs('rect',0,190,230,933,'#f8f8f8');
    ['EÄÄ°TÄ°M','BECERÄ°LER','Ä°LETÄ°ÅÄ°M'].forEach(function(s,i){
      qt(s,14,210+i*240,200,22,{fontSize:'10px',fontWeight:'700',color:'#6c63ff',letterSpacing:'2px'});
      qs('line',14,234+i*240,200,2,'#6c63ff');
      qt('Ä°Ã§erik buraya...',14,240+i*240,200,80,{fontSize:'12px',color:'#2a2a2a',lineHeight:'1.7'});
    });
    ['DENEYÄ°M','PROJELER'].forEach(function(s,i){
      qt(s,245,210+i*330,470,22,{fontSize:'10px',fontWeight:'700',color:'#1a1a2e',letterSpacing:'2px'});
      qs('line',245,234+i*330,480,2,'#e8e8e8');
      qt('Åirket â€” Pozisyon (2020â€“2024)',245,240+i*330,470,26,{fontSize:'13px',fontWeight:'600',color:'#1a1a2e'});
      qt('GÃ¶rev aÃ§Ä±klamasÄ± buraya yazÄ±lÄ±r.',245,270+i*330,470,55,{fontSize:'12px',color:'#666',lineHeight:'1.7'});
    });
  },
  timeline: function(){
    A4.style.background='#fff';
    qt('â±ï¸ ZAMAN Ã‡Ä°ZELGESÄ°',60,44,500,46,{fontSize:'24px',fontWeight:'800',color:'#1a1a2e',fontFamily:"'Syne',sans-serif"});
    qs('line',128,110,3,880,'#e8e8e8');
    var evs=['Ocak 2023','Nisan 2023','Temmuz 2023','Ekim 2023','Ocak 2024','Nisan 2024'];
    evs.forEach(function(d,i){
      var y=118+i*155;
      qs('circle',114,y,26,26,i%2===0?'#6c63ff':'#ff6584');
      qt(d,162,y,180,24,{fontSize:'10px',fontWeight:'700',color:i%2===0?'#6c63ff':'#ff6584',letterSpacing:'1px'});
      qt('Olay baÅŸlÄ±ÄŸÄ±',162,y+26,450,26,{fontSize:'15px',fontWeight:'700',color:'#1a1a2e'});
      qt('AÃ§Ä±klama metni buraya gelir.',162,y+54,450,38,{fontSize:'12px',color:'#777',lineHeight:'1.6'});
    });
  },
  cover: function(){
    A4.style.background='linear-gradient(135deg,#1a1a2e 0%,#0f3460 100%)';
    qs('rect',0,0,794,5,'#6c63ff');
    qt('KAPAK<br>BAÅLIÄI',80,340,634,110,{fontSize:'52px',fontWeight:'800',color:'#fff',fontFamily:"'Syne',sans-serif",textAlign:'center',lineHeight:'1.1'});
    qs('line',220,470,354,3,'#f5c842');
    qt('Alt baÅŸlÄ±k veya slogan',80,490,634,42,{fontSize:'18px',color:'rgba(255,255,255,.7)',textAlign:'center'});
    qt(new Date().getFullYear()+'',80,998,634,34,{fontSize:'13px',color:'rgba(255,255,255,.3)',textAlign:'center'});
  },
  invoice: function(){
    A4.style.background='#fff';
    qt('FATURA',60,44,280,52,{fontSize:'32px',fontWeight:'800',color:'#1a1a2e',fontFamily:"'Syne',sans-serif"});
    qt('No: #001\nTarih: '+new Date().toLocaleDateString('tr-TR'),450,44,280,52,{fontSize:'12px',color:'#888',textAlign:'right'});
    qs('line',60,106,670,2,'#1a1a2e');
    qt('Kimden:\nÅirket AdÄ±\nAdres',60,120,300,65,{fontSize:'12px',color:'#2a2a2a',lineHeight:'1.6'});
    qt('Kime:\nMÃ¼ÅŸteri AdÄ±\nAdres',430,120,280,65,{fontSize:'12px',color:'#2a2a2a',lineHeight:'1.6'});
    qs('rect',60,205,670,34,'#1a1a2e');
    ['ÃœRÃœN','MÄ°KTAR','FÄ°YAT','TOPLAM'].forEach(function(h,i){qt(h,68+i*165,213,155,20,{fontSize:'10px',fontWeight:'700',color:'#fff',letterSpacing:'1px'});});
    for(var r=0;r<5;r++){
      var ry=239+r*36;
      qs('rect',60,ry,670,36,r%2===0?'#f8f8f8':'#fff');
      ['ÃœrÃ¼n '+(r+1),'1','â‚º100','â‚º100'].forEach(function(d,i){qt(d,68+i*165,ry+8,155,22,{fontSize:'13px',color:'#2a2a2a'});});
    }
    qs('rect',450,460,280,36,'#6c63ff');
    qt('TOPLAM: â‚º500.00',458,468,264,22,{fontSize:'13px',fontWeight:'700',color:'#fff'});
  },
  poster: function(){
    A4.style.background='linear-gradient(135deg,#ff6584,#ff8c42)';
    qt('ETKÄ°NLÄ°K',60,80,674,70,{fontSize:'62px',fontWeight:'800',color:'#fff',fontFamily:"'Syne',sans-serif",textAlign:'center'});
    qt('ADI BURAYA',60,148,674,60,{fontSize:'48px',fontWeight:'800',color:'rgba(255,255,255,.3)',fontFamily:"'Syne',sans-serif",textAlign:'center'});
    qs('line',200,225,394,3,'rgba(255,255,255,.5)');
    qt('ğŸ“… Tarih  â€¢  ğŸ• Saat  â€¢  ğŸ“ Yer',60,246,674,38,{fontSize:'15px',color:'rgba(255,255,255,.9)',textAlign:'center'});
    qt('Etkinlik aÃ§Ä±klamasÄ± buraya yazÄ±lÄ±r.',100,310,594,70,{fontSize:'14px',color:'rgba(255,255,255,.8)',textAlign:'center',lineHeight:'1.7'});
    qs('rounded',270,420,254,52,'rgba(255,255,255,.15)');
    qt('DetaylÄ± Bilgi â†’',272,433,250,26,{fontSize:'14px',fontWeight:'700',color:'#fff',textAlign:'center'});
  },
  recipe: function(){
    A4.style.background='#fffdf0';
    qs('rect',0,0,794,5,'#e87040');
    qt('ğŸ³ Tarif AdÄ±',60,26,500,52,{fontSize:'28px',fontWeight:'800',color:'#2a2a2a',fontFamily:'Georgia,serif'});
    qt('â± 30 dk  â€¢  ğŸ‘¥ 4 kiÅŸi  â€¢  ğŸ”¥ Orta',60,82,450,26,{fontSize:'12px',color:'#999'});
    qs('line',60,114,670,2,'#e8e4c8');
    qt('MALZEMELER',60,128,280,22,{fontSize:'10px',fontWeight:'700',color:'#e87040',letterSpacing:'2px'});
    ['â€¢ 200g malzeme 1','â€¢ 100ml malzeme 2','â€¢ 3 adet malzeme 3','â€¢ 1 kaÅŸÄ±k tuz','â€¢ ZeytinyaÄŸÄ±'].forEach(function(m,i){qt(m,60,154+i*28,280,24,{fontSize:'13px',color:'#2a2a2a'});});
    qt('HAZIRLANIÅI',380,128,280,22,{fontSize:'10px',fontWeight:'700',color:'#e87040',letterSpacing:'2px'});
    ['1. Ä°lk adÄ±m','2. Ä°kinci adÄ±m','3. ÃœÃ§Ã¼ncÃ¼ adÄ±m','4. PiÅŸirme sÃ¼resi','5. Servis Ã¶nerisi'].forEach(function(s,i){qt(s,380,154+i*52,330,44,{fontSize:'13px',color:'#2a2a2a',lineHeight:'1.6'});});
  },
  flyer: function(){
    A4.style.background='#fff';
    qs('rect',0,0,794,300,'#6c63ff');
    qt('DUYURU',60,72,674,68,{fontSize:'56px',fontWeight:'800',color:'#fff',fontFamily:"'Syne',sans-serif",textAlign:'center'});
    qt('BaÅŸlÄ±k ve Ana Mesaj',60,152,674,48,{fontSize:'22px',color:'rgba(255,255,255,.85)',textAlign:'center'});
    qt('Tarih Â· Saat Â· Yer',60,210,674,34,{fontSize:'14px',color:'rgba(255,255,255,.6)',textAlign:'center'});
    qt('DetaylÄ± bilgi buraya yazÄ±lÄ±r. Ã–nemli aÃ§Ä±klamalar eklenir.',80,340,634,70,{fontSize:'15px',color:'#2a2a2a',textAlign:'center',lineHeight:'1.7'});
    qs('rounded',247,450,300,52,'#6c63ff');
    qt('Ä°letiÅŸim / KayÄ±t',247,463,300,26,{fontSize:'14px',fontWeight:'700',color:'#fff',textAlign:'center'});
    qt('ğŸ“ 555 000 0000  â€¢  ğŸŒ www.site.com',80,548,634,26,{fontSize:'12px',color:'#999',textAlign:'center'});
  },
  newsletter: function(){
    qs('rect',0,0,794,64,'#1a1a2e');
    qt('ğŸ“° BÃœLTEN ADI',60,16,500,34,{fontSize:'20px',fontWeight:'700',color:'#fff',fontFamily:"'Syne',sans-serif"});
    qt(new Date().toLocaleDateString('tr-TR'),580,24,154,22,{fontSize:'11px',color:'rgba(255,255,255,.5)',textAlign:'right'});
    qt('Ã–NEMLI HABER',60,82,355,24,{fontSize:'10px',fontWeight:'700',color:'#6c63ff',letterSpacing:'1.5px'});
    qt('Haber BaÅŸlÄ±ÄŸÄ±',60,108,355,38,{fontSize:'18px',fontWeight:'700',color:'#1a1a2e'});
    qt('Haber iÃ§eriÄŸi buraya yazÄ±lÄ±r. Okuyuculara aktarÄ±lacak bilgiler.',60,150,355,65,{fontSize:'13px',color:'#666',lineHeight:'1.7'});
    qs('line',428,80,2,250,'#e8e8e8');
    qt('KISA HABERLER',448,82,280,24,{fontSize:'10px',fontWeight:'700',color:'#ff6584',letterSpacing:'1.5px'});
    ['Haber 1','Haber 2','Haber 3'].forEach(function(h,i){
      qt('â€¢ '+h,448,112+i*64,280,22,{fontSize:'13px',fontWeight:'600',color:'#1a1a2e'});
      qt('KÄ±sa aÃ§Ä±klama metni',448,136+i*64,280,22,{fontSize:'11px',color:'#999'});
    });
  },
  certificate: function(){
    A4.style.background='#faf8f3';
    qs('rect',0,0,794,1123,'none');
    qs('rect',8,8,778,1107,'none');
    qt('ğŸ†',320,75,155,70,{fontSize:'52px',textAlign:'center'});
    qt('SERTÄ°FÄ°KA',80,158,634,52,{fontSize:'38px',fontWeight:'800',color:'#c9a84c',fontFamily:'Georgia,serif',textAlign:'center',letterSpacing:'5px'});
    qs('line',200,220,394,2,'#c9a84c');
    qt('Bu belge ile aÅŸaÄŸÄ±daki kiÅŸinin',80,244,634,30,{fontSize:'14px',color:'#999',textAlign:'center'});
    qt('AD SOYAD',80,282,634,58,{fontSize:'34px',fontWeight:'700',color:'#1a1a2e',fontFamily:'Georgia,serif',textAlign:'center'});
    qt('baÅŸarÄ± ile tamamladÄ±ÄŸÄ± teyit edilir.',80,348,634,30,{fontSize:'14px',color:'#999',textAlign:'center'});
    qt('KONU ADI',80,390,634,42,{fontSize:'20px',fontWeight:'700',color:'#c9a84c',textAlign:'center'});
    qs('line',150,970,200,2,'#1a1a2e');
    qt('Ä°mza',150,978,200,22,{fontSize:'12px',color:'#999',textAlign:'center'});
    qs('line',450,970,200,2,'#1a1a2e');
    qt(new Date().toLocaleDateString('tr-TR'),450,978,200,22,{fontSize:'12px',color:'#999',textAlign:'center'});
  },
  quiz: function(){
    A4.style.background='#fff';
    qt('ğŸ“‹ SINAV / TEST',60,44,500,46,{fontSize:'24px',fontWeight:'800',color:'#1a1a2e',fontFamily:"'Syne',sans-serif"});
    qt('Ad Soyad: ________________________    Tarih: __________',60,96,670,26,{fontSize:'12px',color:'#666'});
    qs('line',60,128,670,2,'#e8e8e8');
    for(var q=1;q<=5;q++){
      var qy=140+(q-1)*168;
      qt('Soru '+q+': Soru metni buraya yazÄ±lÄ±r?',60,qy,670,28,{fontSize:'14px',fontWeight:'600',color:'#1a1a2e'});
      ['A) ÅÄ±k bir','B) ÅÄ±k iki','C) ÅÄ±k Ã¼Ã§','D) ÅÄ±k dÃ¶rt'].forEach(function(s,i){qt(s,80+i*158,qy+32,150,22,{fontSize:'12px',color:'#2a2a2a'});});
      qs('rect',60,qy+62,670,36,'#f8f8f8');
      qt('Cevap: ___________',68,qy+72,200,20,{fontSize:'11px',color:'#aaa'});
      qs('line',60,qy+150,670,1,'#e8e8e8');
    }
  },
  schedule: function(){
    A4.style.background='#fff';
    qt('ğŸ“… HAFTALIK PROGRAM',60,44,560,44,{fontSize:'22px',fontWeight:'800',color:'#1a1a2e',fontFamily:"'Syne',sans-serif"});
    var days=['PAZ','PZT','SAL','Ã‡AR','PER','CUM','CMT'];
    var cw2=Math.floor(670/7);
    qs('rect',60,98,670,34,'#1a1a2e');
    days.forEach(function(d,i){qt(d,68+i*cw2,106,cw2-2,18,{fontSize:'9px',fontWeight:'700',color:i===0||i===6?'#ff6584':'#fff',textAlign:'center',letterSpacing:'1px'});});
    var times=['08:00','09:00','10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00','18:00'];
    times.forEach(function(t,r){
      qs('rect',60,132+r*70,670,70,r%2===0?'#f8f8f8':'#fff');
      qt(t,14,144+r*70,44,16,{fontSize:'9px',color:'#bbb',textAlign:'right'});
    });
  },
  proposal: function(){
    qs('rect',0,0,794,190,'#1a1a2e');
    qs('rect',0,184,794,6,'#6c63ff');
    qt('PROJE TEKLÄ°FÄ°',60,46,500,52,{fontSize:'30px',fontWeight:'800',color:'#fff',fontFamily:"'Syne',sans-serif"});
    qt('Proje / MÃ¼ÅŸteri AdÄ±',60,108,500,34,{fontSize:'15px',color:'rgba(255,255,255,.5)'});
    qt(new Date().toLocaleDateString('tr-TR'),560,116,174,26,{fontSize:'12px',color:'rgba(255,255,255,.4)',textAlign:'right'});
    ['PROJE HAKKINDA','KAPSAM','ZAMAN Ã‡Ä°ZELGESÄ°','BÃœTÃ‡E','Ä°LETÄ°ÅÄ°M'].forEach(function(s,i){
      var sy=215+i*160;
      qs('rect',60,sy,6,55,'#6c63ff');
      qt(s,76,sy+3,380,22,{fontSize:'10px',fontWeight:'700',color:'#6c63ff',letterSpacing:'1.5px'});
      qt('Bu bÃ¶lÃ¼mÃ¼n iÃ§eriÄŸi buraya yazÄ±lÄ±r.',76,sy+28,640,48,{fontSize:'13px',color:'#2a2a2a',lineHeight:'1.7'});
    });
  },
  journal: function(){
    A4.style.background='#fdf9f0';
    qs('rect',0,0,6,1123,'#e87040');
    qt(new Date().toLocaleDateString('tr-TR',{weekday:'long',year:'numeric',month:'long',day:'numeric'}),24,36,730,34,{fontSize:'14px',color:'#c0a882',fontFamily:'Georgia,serif',fontStyle:'italic'});
    qt('GÃ¼nlÃ¼k...',24,76,700,46,{fontSize:'26px',fontWeight:'700',color:'#2a2a2a',fontFamily:'Georgia,serif'});
    qs('line',24,128,750,1,'#e8dcc8');
    qt('BugÃ¼n nasÄ±l hissettim?',24,144,400,22,{fontSize:'10px',color:'#c0a882',letterSpacing:'1px'});
    for(var i=0;i<8;i++){qs('line',24,172+i*52,750,1,'#e8dcc8');qt('',30,174+i*52,740,36,{fontSize:'14px',color:'#2a2a2a',lineHeight:'1.7'});}
    qt('Minnettar olduklarÄ±m:',24,608,300,22,{fontSize:'10px',color:'#c0a882',letterSpacing:'1px'});
    ['1.','2.','3.'].forEach(function(n,i){qt(n+'  ____________________________________',24,634+i*44,440,34,{fontSize:'13px',color:'#2a2a2a'});});
  },
  comparison: function(){
    A4.style.background='#fff';
    qt('âš–ï¸ KARÅILAÅTIRMA',197,44,400,44,{fontSize:'22px',fontWeight:'800',color:'#1a1a2e',fontFamily:"'Syne',sans-serif",textAlign:'center'});
    qs('rect',60,98,310,42,'#38ef7d');
    qs('rect',424,98,310,42,'#ff6584');
    qt('âœ… ARTILARI',60,108,310,26,{fontSize:'12px',fontWeight:'700',color:'#fff',textAlign:'center',letterSpacing:'1px'});
    qt('âŒ EKSÄ°LERÄ°',424,108,310,26,{fontSize:'12px',fontWeight:'700',color:'#fff',textAlign:'center',letterSpacing:'1px'});
    qs('line',390,98,2,900,'#e8e8e8');
    for(var i=0;i<7;i++){
      var iy=152+i*100;
      qs('rounded',68,iy,295,82,'#f0fff4');
      qt('ArtÄ± madde '+(i+1),78,iy+10,275,56,{fontSize:'13px',color:'#1a5c35',lineHeight:'1.7'});
      qs('rounded',432,iy,295,82,'#fff0f0');
      qt('Eksi madde '+(i+1),442,iy+10,275,56,{fontSize:'13px',color:'#5c1a1a',lineHeight:'1.7'});
    }
  },
  swot: function(){
    A4.style.background='#fff';
    qt('ğŸ”· SWOT ANALÄ°ZÄ°',60,44,500,44,{fontSize:'24px',fontWeight:'800',color:'#1a1a2e',fontFamily:"'Syne',sans-serif"});
    qt('Konu / Proje AdÄ±',60,90,500,26,{fontSize:'13px',color:'#999'});
    var qs2=[
      {l:'ğŸ’ª GÃœÃ‡LÃœ',c:'#2193b0',x:60,y:130},{l:'âš ï¸ ZAYIF',c:'#ff6584',x:427,y:130},
      {l:'ğŸš€ FIRSAT',c:'#38ef7d',x:60,y:616},{l:'ğŸ”¥ TEHDÄ°T',c:'#f5c842',x:427,y:616}
    ];
    qs2.forEach(function(q){
      qs('rect',q.x,q.y,337,460,'#f8f8f8');
      qs('rect',q.x,q.y,337,42,q.c);
      qt(q.l,q.x+8,q.y+10,320,24,{fontSize:'12px',fontWeight:'700',color:'#fff'});
      ['Madde 1','Madde 2','Madde 3'].forEach(function(item,i){qt('â€¢ '+item,q.x+12,q.y+56+i*46,310,36,{fontSize:'13px',color:'#2a2a2a',lineHeight:'1.6'});});
    });
  },
  kanban: function(){
    A4.style.background='#f5f5fa';
    qt('ğŸ—‚ï¸ KANBAN PANOSU',60,44,500,44,{fontSize:'22px',fontWeight:'800',color:'#1a1a2e',fontFamily:"'Syne',sans-serif"});
    [{l:'ğŸ“‹ YAPILACAK',c:'#6c63ff'},{l:'âš™ï¸ YAPILIYOR',c:'#f5c842'},{l:'âœ… TAMAMLANDI',c:'#38ef7d'}].forEach(function(col,ci){
      var cx=60+ci*245;
      qs('rect',cx,98,225,900,'#fff');
      qs('rect',cx,98,225,36,col.c);
      qt(col.l,cx+5,106,215,22,{fontSize:'9px',fontWeight:'700',color:ci===1?'#1a1a1a':'#fff',letterSpacing:'1px'});
      for(var i=0;i<4;i++){
        qs('rounded',cx+8,142+i*100,209,82,'#f8f8f8');
        qt('GÃ¶rev '+(ci*4+i+1),cx+16,150+i*100,190,22,{fontSize:'13px',fontWeight:'600',color:'#1a1a2e'});
        qt('AÃ§Ä±klama...',cx+16,174+i*100,190,32,{fontSize:'11px',color:'#aaa',lineHeight:'1.5'});
      }
    });
  },
  infographic: function(){
    A4.style.background='#1a1a2e';
    qs('rect',0,0,794,110,'#6c63ff');
    qt('Ä°NFOGRAFÄ°K BAÅLIÄI',60,28,674,55,{fontSize:'28px',fontWeight:'800',color:'#fff',fontFamily:"'Syne',sans-serif",textAlign:'center'});
    [['%85','Oran 1'],['1.2K','SayÄ± 2'],['42','Veri 3'],['#1','SÄ±ra']].forEach(function(s,i){
      var sx=60+i*178;
      qs('rounded',sx,128,158,108,'rgba(255,255,255,.07)');
      qt(s[0],sx+4,148,150,42,{fontSize:'32px',fontWeight:'800',color:'#f5c842',textAlign:'center',fontFamily:"'Syne',sans-serif"});
      qt(s[1],sx+4,194,150,22,{fontSize:'11px',color:'rgba(255,255,255,.55)',textAlign:'center'});
    });
    ['Kategori A','Kategori B','Kategori C','Kategori D'].forEach(function(cat,i){
      var cy=278+i*115;
      qt(cat,60,cy,155,22,{fontSize:'12px',color:'rgba(255,255,255,.7)'});
      qs('rounded',218,cy,452,20,'rgba(255,255,255,.1)');
      qs('rounded',218,cy,[75,50,90,35][i]/100*452,20,'#6c63ff');
      qt([75,50,90,35][i]+'%',680,cy,58,20,{fontSize:'11px',color:'rgba(255,255,255,.5)',textAlign:'right'});
    });
  },
  moodboard: function(){
    A4.style.background='#f0f0f5';
    qs('rect',0,0,794,72,'#fff');
    qt('âœ¨ MOOD BOARD',36,18,400,38,{fontSize:'20px',fontWeight:'700',color:'#1a1a2e',fontFamily:"'Syne',sans-serif"});
    qt('Tema AdÄ±',460,24,280,26,{fontSize:'12px',color:'#aaa',textAlign:'right'});
    var blks=[{x:18,y:80,w:365,h:230,c:'#6c63ff'},{x:392,y:80,w:182,h:110,c:'#ff6584'},{x:392,y:198,w:182,h:112,c:'#f5c842'},{x:582,y:80,w:194,h:230,c:'#38ef7d'},{x:18,y:318,w:182,h:200,c:'#2193b0'},{x:208,y:318,w:182,h:200,c:'#e65100'},{x:398,y:318,w:378,h:200,c:'#a855f7'}];
    blks.forEach(function(b){
      qs('rect',b.x,b.y,b.w,b.h,b.c);
      qt('Foto / Renk',b.x+8,b.y+b.h/2-10,b.w-16,22,{fontSize:'10px',color:'rgba(255,255,255,.4)',textAlign:'center'});
    });
    ['Kelime','Tema','Renk','Doku','His'].forEach(function(w,i){qt(w,18+i*155,544,145,30,{fontSize:'13px',fontWeight:'700',color:'#1a1a2e',textAlign:'center'});});
    qt('Notlar ve fikirler buraya...',18,588,758,90,{fontSize:'13px',color:'#888',lineHeight:'1.7',fontStyle:'italic',fontFamily:'Georgia,serif'});
  },
};

// ===== KEYBOARD =====
document.addEventListener('keydown',function(e){
  if(e.key==='Delete'&&selId&&document.activeElement.contentEditable!=='true') deleteEl(selId);
  if((e.ctrlKey||e.metaKey)&&e.key==='z'){e.preventDefault();undoLast();}
  if((e.ctrlKey||e.metaKey)&&e.key==='d'&&selId){e.preventDefault();dupEl();}
});

// ===== TOAST =====
function toast(msg){var t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(function(){t.classList.remove('show');},2200);}

// ===== INIT =====
renderPanel('tpl');
toast('ğŸ‘‹ Åablon seÃ§in veya eleman ekleyin!');
</script>
</body>
</html>
